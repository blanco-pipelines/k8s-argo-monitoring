k8s-monitoring:
  cluster:
    name: monitoring-lab

  # Collectors - enable Alloy instances
  alloy-metrics:
    enabled: true
  alloy-logs:
    enabled: true
  alloy-singleton:
    enabled: true

  # Feature: Cluster Metrics (kube-state-metrics, node-exporter, etc)
  clusterMetrics:
    enabled: true

  # Feature: Pod Logs
  podLogs:
    enabled: true

  # Feature: Cluster Events
  clusterEvents:
    enabled: true

  # Prometheus - enabled with LoadBalancer
  prometheus:
    enabled: true
    server:
      service:
        type: LoadBalancer
      persistentVolume:
        enabled: true
        storageClass: gp2
        size: 10Gi
      extraFlags:
        - "web.enable-remote-write-receiver"

  # Loki - enabled
  loki:
    enabled: true
    deploymentMode: SingleBinary
    singleBinary:
      replicas: 1
      persistence:
        enabled: true
        storageClass: gp2
        size: 10Gi
    loki:
      auth_enabled: false
      commonConfig:
        replication_factor: 1
      storage:
        type: filesystem
    read:
      replicas: 0
    write:
      replicas: 0
    backend:
      replicas: 0
    gateway:
      enabled: false
    monitoring:
      selfMonitoring:
        enabled: false
      lokiCanary:
        enabled: false
    test:
      enabled: false

  # Grafana - enabled with LoadBalancer and datasources
  grafana:
    enabled: true
    service:
      type: LoadBalancer
    adminUser: admin
    adminPassword: admin
    persistence:
      enabled: true
      storageClassName: gp2
      size: 5Gi
    datasources:
      datasources.yaml:
        apiVersion: 1
        datasources:
          - name: Prometheus
            type: prometheus
            url: http://k8s-monitoring-prometheus-server:80
            access: proxy
            isDefault: true
          - name: Loki
            type: loki
            url: http://k8s-monitoring-loki:3100
            access: proxy
